<section class="lg:mx-25 mx-5">

  <!-- Profil utilisateur -->
  <div *ngIf="profile() as p; else loading" class="text-center md:text-left py-15">
    <h1>{{ p.firstName }} {{ p.lastName }}</h1>
    <p>{{ p.email }}</p>
    <p>
      <a routerLink="/profile/edit" class="text-center md:text-left underline">
        Modifier mon profil
      </a>
    </p>
  </div>

  <ng-template #loading>
    <p class="text-center py-10">Chargement du profil…</p>
  </ng-template>

  <!-- ========================= -->
  <!-- Mes lieux de charge -->
  <!-- ========================= -->
  <div class="mb-12">
    <div class="flex items-center justify-between">
      <h2 class="font-bold">Mes lieux de charge</h2>
      <a routerLink="/locations/new" class="underline text-sm">
        Ajouter un lieu de charge
      </a>
    </div>
    <hr class="my-3">

    <div *ngIf="locations()?.length; else noLocations" class="grid gap-6 md:grid-cols-2">

      <div *ngFor="let location of locations()?.slice(0, 3)" class="cards p-5 rounded-sm leading-8">
        <p class="font-bold">
          {{ location.nickname || 'Lieu de charge' }}
        </p>
        <p class="text-sm text-gray-600">
          {{ location.address }} – {{ location.cityName }}
        </p>

        <div class="mt-4 flex justify-between items-center">
          <a [routerLink]="['/locations', location.locationId, 'stations']" class="underline text-sm">
            Voir les bornes
          </a>

          <a [routerLink]="['/locations', location.locationId, 'stations', 'new']" class="underline text-sm">
            Ajouter une borne
          </a>
        </div>
      </div>

    </div>


    <ng-template #noLocations>
      <p class="text-sm text-gray-600 mt-4">
        Vous n'avez encore déclaré aucun lieu de charge.
      </p>
    </ng-template>
  </div>

  <!-- ========================= -->
  <!-- Mes bornes de recharge -->
  <!-- ========================= -->
  <div class="mb-12">
    <h2 class="font-bold">Mes bornes de recharge</h2>
    <hr class="my-3">

    <div *ngIf="stationsPreview()?.length; else noStations" class="grid gap-6 md:grid-cols-3">

      <div *ngFor="let station of stationsPreview()?.slice(0, 3)" class="cards p-5 rounded-sm leading-8">
        <p class="font-bold">
          {{ station.name }}
        </p>
        <p class="font-bold">
          {{ station.power }} kVA
        </p>
        <p class="text-sm">
          {{ station.hourlyRate }} € / heure
        </p>
        <p class="text-sm text-gray-600">
          {{ station.locationName }}
        </p>

        <img *ngIf="station.photoUrl" [src]="station.photoUrl" alt="Photo de la borne" class="mt-3 rounded-md">
      </div>

    </div>


    <ng-template #noStations>
      <p class="text-sm text-gray-600 mt-4">
        Aucune borne enregistrée pour le moment.
      </p>
    </ng-template>
  </div>

  <!-- ========================= -->
  <!-- Réservations en cours (PLACEHOLDER) -->
  <!-- ========================= -->
  <div class="mb-10">
    <h2 class="font-bold">Réservations en cours</h2>
    <hr>
    <div class="cards p-5 mx-2 rounded-sm leading-9 w-5/6 md:w-1/3">
      <p class="font-bold">sdsqsq</p>
      <p>qsdsqd</p>
      <p>zdsqdc</p>
    </div>
  </div>

  <!-- ========================= -->
  <!-- Demandes à traiter (PLACEHOLDER) -->
  <!-- ========================= -->
  <div class="mb-10">
    <h2 class="font-bold">Demandes à traiter</h2>
    <hr>
    <div class="cards p-5 mx-2 rounded-sm leading-9 w-5/6 md:w-1/3">
      <p class="font-bold">sdsqsq</p>
      <p>qsdsqd</p>
      <p>zdsqdc</p>
    </div>
  </div>

  <!-- ========================= -->
  <!-- Réservations passées (PLACEHOLDER) -->
  <!-- ========================= -->
  <div class="mb-10">
    <h2 class="font-bold">Réservations passées</h2>
    <hr>
    <div class="cards p-5 mx-2 rounded-sm leading-9 w-5/6 md:w-1/3">
      <p class="font-bold">sdsqsq</p>
      <p>qsdsqd</p>
      <p>zdsqdc</p>
    </div>
  </div>

  <!-- ========================= -->
  <!-- Demandes traitées (PLACEHOLDER) -->
  <!-- ========================= -->
  <div class="mb-10">
    <h2 class="font-bold">Demandes traitées</h2>
    <hr>
    <div class="cards p-5 mx-2 rounded-sm leading-9 w-5/6 md:w-1/3">
      <p class="font-bold">sdsqsq</p>
      <p>qsdsqd</p>
      <p>zdsqdc</p>
    </div>
  </div>

</section>